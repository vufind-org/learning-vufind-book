<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Combining regular and web results &#8212; Vufind Documentation 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="Vufind Documentation 0.0.1 documentation" href="index.html" />
    <link rel="next" title="Recommendation modules" href="recommend.html" />
    <link rel="prev" title="Web crawling with Vufind" href="webcrawl.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="recommend.html" title="Recommendation modules"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="webcrawl.html" title="Web crawling with Vufind"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Vufind Documentation 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="combining-regular-and-web-results">
<h1>Combining regular and web results<a class="headerlink" href="#combining-regular-and-web-results" title="Permalink to this headline">¶</a></h1>
<div class="section" id="chapter-13-combining-different-types-of-search-results">
<h2>Chapter 13. Combining Different Types of Search Results<a class="headerlink" href="#chapter-13-combining-different-types-of-search-results" title="Permalink to this headline">¶</a></h2>
<div class="section" id="learning-objectives">
<h3>Learning Objectives<a class="headerlink" href="#learning-objectives" title="Permalink to this headline">¶</a></h3>
<p>After reading this chapter, you will understand:</p>
<ul class="simple">
<li>How to combine different types of searches into a single interface.</li>
<li>How to activate additional search navigation features.</li>
<li>The roles of the combined.ini and searchbox.ini configuration files.</li>
</ul>
</div>
<div class="section" id="understanding-combined-ini">
<h3>13.1 Understanding combined.ini<a class="headerlink" href="#understanding-combined-ini" title="Permalink to this headline">¶</a></h3>
<p>So far in this book, two distinct types of VuFind searching have been introduced: the default bibliographic search and the web search (see chapter 12). Even more options will be discussed in chapter 15. Search engines have trained users to search using a single box, but presenting heterogeneous search results in a single list does not always make sense, and can introduce complex relevance ranking challenges. A popular solution to this problem is the “Bento Box” approach, in which a single search query reveals multiple categories of search results. VuFind supports this type of searching through the combined.ini configuration file.</p>
<p>The combined.ini file controls the behavior of the /Combined page of your VuFind instance (e.g. <a class="reference external" href="http://localhost/vufind/Combined">http://localhost/vufind/Combined</a>). It allows you to search across any number of search backends and display those results on screen together in a pattern that you define.</p>
<p>As with all of VuFind’s configuration files, the most complete and up-to-date documentation on options and values can be found in the comments contained within the file itself. The configuration file has a handful of reserved sections (Basic_Searches, HomePage, Layout and RecommendationModules); any other sections added to the file must have names that correspond with search backends supported by VuFind (see section 4.5.2 for an introduction to search backends).</p>
<p>The reserved sections affect global aspects of the combined screen: how to lay out the Bento Boxes, what to display on the home screen before a search is performed, which recommendation modules to display above or below the combined results, etc. The search backend-specific sections contain settings specifying how to display results from those backends: how many results to include in the box, whether or not to load the results through AJAX, how to label everything, etc.</p>
<p>For example, suppose we want to show our standard Solr search results side-by-side with our website search results. We want to load the Solr results “inline” (so they are immediately available when the page loads) but we want to load the website results using AJAX (meaning that they will “pop in” shortly after the rest of the page has loaded – using AJAX makes the overall page load more quickly, though some results may take additional time to appear). The configuration would look like this ($VUFIND_LOCAL_DIR/config/vufind/combined.ini):</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[Layout]</span>
<span class="go">columns = 2</span>

<span class="go">[Solr]</span>
<span class="go">label = Catalog</span>
<span class="go">more_link = &quot;More Catalog Results&quot;</span>

<span class="go">[SolrWeb]</span>
<span class="go">label = Website</span>
<span class="go">ajax = true</span>
<span class="go">more_link = &quot;More Website Results&quot;</span>
</pre></div>
</div>
<p>VuFind’s combined search feature also includes the ability to create specialized boxes by applying filters to search backends. For example, if you wanted to highlight online materials in your catalog, you could create a special box to show them. To do this, you simply need to add a colon and a differentiating name after the search backend name in the configuration, then populate the filter or hiddenFilter setting. The difference between a “filter” and a “hiddenFilter” is whether or not the user interface will show the filter as an applied facet. If you use “filter” and the user clicks through to the full search results, they will see the filter and can remove it; if you use “hiddenFilter,” the filter will be applied but there will be no control to get rid of it. The “hiddenFilter” control is useful in combination with filtered search tabs (described below in section 13.3), but “filter” will provide a better user experience in other situations. The “online” example could be set up like this:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[Solr:online]</span>
<span class="go">label = Online Material</span>
<span class="go">hiddenFilter = &quot;format:Online&quot;</span>
<span class="go">more_link = &quot;More Online Material&quot;</span>
</pre></div>
</div>
<p>This example uses a hiddenFilter because it is designed to complement a future search tab example.</p>
<p>Note that if you copy the default combined.ini file from $VUFIND_HOME/config/vufind/combined.ini, you will have to comment out any example sections representing search backends that you do not use; the simple presence of a backend-related section in the file will cause that backend to be included in combined results.</p>
<p>If you want to make this combined search the default for your entire site, you can edit your $VUFIND_LOCAL_DIR/config/vufind/config.ini file and change the “defaultModule” setting from “Search” (the default, which uses the primary Solr biblio core as the standard search) to “Combined” (which will make the global search box do a combined search by default, and will make the standard home page of VuFind the Combined home page).</p>
</div>
<div class="section" id="understanding-searchbox-ini">
<h3>13.2 Understanding searchbox.ini<a class="headerlink" href="#understanding-searchbox-ini" title="Permalink to this headline">¶</a></h3>
<p>VuFind offers a configuration file to control the behavior of the search box that appears on every page of the application: searchbox.ini. By default, the drop-down menu next to the search box will only include options relevant to the currently-active backend. For example, if you are looking at Solr bibliographic search results, you will see the options configured in searches.ini; if you are looking at web results, you will see the options configured in website.ini. If you introduce combined searching, however, this behavior may no longer be desirable, and it may be preferable to display all of the options in the menu at all times, for a more consistent experience.</p>
<p>To turn on combined options in the search box, simply copy $VUFIND_HOME/config/vufind/searchbox.ini into $VUFIND_LOCAL_DIR/config/vufind/, turn on the combinedHandlers option in the [General] section, and populate the [CombinedHandlers] section with the appropriate options. For example:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[General]</span>
<span class="go">combinedHandlers = true</span>

<span class="go">[CombinedHandlers]</span>
<span class="go">type[] = VuFind</span>
<span class="go">target[] = Solr</span>
<span class="go">label[] = Catalog</span>
<span class="go">group[] = false</span>

<span class="go">type[] = VuFind</span>
<span class="go">target[] = SolrWeb</span>
<span class="go">label[] = Website</span>
<span class="go">group[] = false</span>
</pre></div>
</div>
<p>When editing the [CombinedHandlers] section, it is important to ensure that all of the settings end in brackets ([]) and that every block includes all of the values. Otherwise, the configuration may be interpreted incorrectly.</p>
<p>The “type” of “VuFind” simply indicates that these are internal VuFind search backends; you can also use a type value of “External” if you want to allow the VuFind search box to redirect into a third-party system. (When using “External,” the “target” value is a URL instead of a search backend name). The “label” setting should be self-explanatory, and the “group” setting can be used to group related options together under a heading within the drop-down menu, if you have a large number of options that need to be organized more hierarchically.</p>
<p>As usual, additional options (such as the ability to incorporate alphabetical browse options into the search drop-down menu) are documented through comments in the file.</p>
</div>
<div class="section" id="configuring-search-tabs-in-config-ini">
<h3>13.3 Configuring search tabs in config.ini<a class="headerlink" href="#configuring-search-tabs-in-config-ini" title="Permalink to this headline">¶</a></h3>
<p>In addition to the value of searching multiple systems at once and having access to all options through a single drop-down menu, there is one more feature which can help users navigate complex search environments: tabs. While the combined search screen provides a summary of the first page of results from multiple search backends, users will often need to click into a single result set to access deeper results and features like facet controls. Once a user has focused in on a specific result set, it is sometimes useful to have a quick way to switch into a different one. VuFind’s search tab feature offers this functionality.</p>
<p>When search tabs are enabled, tabs will appear near the search box. When search results are displayed, clicking on a different tab will transfer the current search terms (and, when possible, the search handler) to a different search backend. Tabs provide a quick way to switch between different detailed search result views. The transfer of search handler settings is based on name matching – for example, if you are performing an “Author” search in Solr and you click to a different tab, VuFind will look for a search handler whose description matches “Author;” if no match is found, the default handler will be applied.</p>
<p>Configuration of search tabs takes place in config.ini’s [SearchTabs] section. Simply create a map of search handler names to labels. To continue this chapter’s example of combined bibliographic and website searching, you could use these settings:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[SearchTabs]</span>
<span class="go">Solr = Catalog</span>
<span class="go">SolrWeb = Website</span>
</pre></div>
</div>
<p>VuFind’s search tab feature also includes the ability to create specialized tabs by applying filters to search backends, similar to the way combined search Bento Boxes can be filtered. To do this, you simply need to add a colon and a differentiating name after the search backend name in the configuration. Then you need to add an entry to the [SearchTabsFilters] section of the configuration specifying the filter(s) to apply. The “online” tab example from section 13.1 could be set up as a tab like this:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[SearchTabs]</span>
<span class="go">Solr = Catalog</span>
<span class="go">Solr:online = Online Materials</span>
<span class="go">SolrWeb = Website</span>

<span class="go">[SearchTabsFilters]</span>
<span class="go">Solr:online = &quot;format:Online&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="additional-resources">
<h3>Additional Resources<a class="headerlink" href="#additional-resources" title="Permalink to this headline">¶</a></h3>
<p>Some additional information on the subjects discussed in this chapter can be found on the “Combining Search Types” page in VuFind’s wiki (<a class="reference external" href="https://vufind.org/wiki/configuration:combining_search_types">https://vufind.org/wiki/configuration:combining_search_types</a>).</p>
</div>
<div class="section" id="summary">
<h3>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h3>
<p>VuFind supports many different types of searching; by configuring combined.ini, searchbox.ini and config.ini correctly, it is possible to make the user’s experience more convenient and understandable while navigating the available options in your environment.</p>
</div>
<div class="section" id="review-questions">
<h3>Review Questions<a class="headerlink" href="#review-questions" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>How can you add or remove search backends on your combined search results screen?</li>
<li>Which configuration file can be used to display options from multiple search backends in the drop-down menu next to the search box?</li>
<li>How can you create a filtered search tab?</li>
</ol>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Combining regular and web results</a><ul>
<li><a class="reference internal" href="#chapter-13-combining-different-types-of-search-results">Chapter 13. Combining Different Types of Search Results</a><ul>
<li><a class="reference internal" href="#learning-objectives">Learning Objectives</a></li>
<li><a class="reference internal" href="#understanding-combined-ini">13.1 Understanding combined.ini</a></li>
<li><a class="reference internal" href="#understanding-searchbox-ini">13.2 Understanding searchbox.ini</a></li>
<li><a class="reference internal" href="#configuring-search-tabs-in-config-ini">13.3 Configuring search tabs in config.ini</a></li>
<li><a class="reference internal" href="#additional-resources">Additional Resources</a></li>
<li><a class="reference internal" href="#summary">Summary</a></li>
<li><a class="reference internal" href="#review-questions">Review Questions</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="webcrawl.html"
                        title="previous chapter">Web crawling with Vufind</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="recommend.html"
                        title="next chapter">Recommendation modules</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/combineresults.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="recommend.html" title="Recommendation modules"
             >next</a> |</li>
        <li class="right" >
          <a href="webcrawl.html" title="Web crawling with Vufind"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Vufind Documentation 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Demian Katz .
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9.
    </div>
  </body>
</html>