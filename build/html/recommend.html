
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chapter 14. Recommendation Modules &#8212; Vufind Documentation 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Chapter 15. Other Search Backends" href="otherv.html" />
    <link rel="prev" title="Chapter 13. Combining Different Types of Search Results" href="combineresults.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="otherv.html" title="Chapter 15. Other Search Backends"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="combineresults.html" title="Chapter 13. Combining Different Types of Search Results"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Vufind Documentation 0.0.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Chapter 14. Recommendation Modules</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="chapter-14-recommendation-modules">
<h1>Chapter 14. Recommendation Modules<a class="headerlink" href="#chapter-14-recommendation-modules" title="Permalink to this headline">¶</a></h1>
<div class="section" id="learning-objectives">
<h2>Learning Objectives<a class="headerlink" href="#learning-objectives" title="Permalink to this headline">¶</a></h2>
<p>After reading this chapter, you will understand:</p>
<ul class="simple">
<li><p>What a recommendation module is.</p></li>
<li><p>How recommendation module configuration works.</p></li>
<li><p>Some common use cases for recommendation modules.</p></li>
</ul>
</div>
<div class="section" id="what-is-a-recommendation-module">
<h2>14.1 What is a Recommendation Module?<a class="headerlink" href="#what-is-a-recommendation-module" title="Permalink to this headline">¶</a></h2>
<p>Generally, when a user sees a list of search results, it is beneficial to provide them with some additional information beyond the results themselves: facet lists for limiting results, suggestions about spelling corrections or relevant alternate resources, etc. In VuFind, all of this supplemental information is displayed to the user using “recommendation modules.”</p>
<p>A recommendation module is a VuFind plug-in, consisting of a PHP class and an associated template, which can examine a user’s search query and/or the search results, then display useful information based on some or all of that input. Recommendation module output can be configured to display above or beside the search results, and different modules can be configured for each search handler. It is also possible to configure VuFind to display different recommendation modules when the user’s search results are empty, since a different set of suggestions may be relevant in that scenario.</p>
<p>VuFind includes a large variety of recommendation modules and a default configuration that makes use of those that are most commonly needed. VuFind’s built-in extensibility also makes it straightforward for developers to build their own custom modules as needed.</p>
</div>
<div class="section" id="understanding-recommendation-configuration">
<h2>14.2 Understanding Recommendation Configuration<a class="headerlink" href="#understanding-recommendation-configuration" title="Permalink to this headline">¶</a></h2>
<p>Each search backend (Solr, EDS, Summon, etc.) has its own separate recommendation configuration, since each system has unique characteristics and requirements; by default, all backends are set up with similar-looking configurations.</p>
<p>Recommendation configuration can be found in the primary .ini file for the relevant backend – e.g. searches.ini for the primary Solr search, website.ini for the Solr website search, EDS.ini for EBSCO Discovery Service, Summon.ini for Summon, etc. The most detailed notes and comments (including a list of all available modules) can be found in searches.ini, since this is the most commonly-used configuration. Configuration works exactly the same way across all backends, though some modules may only apply to specific backends. The comments will note this when relevant.</p>
<p>Recommendation settings are spread across several sections of the .ini files. In the [General] section, the default_top_recommend[], default_side_recommend[] and default_noresults_recommend[] settings allow defaults to be configured. These are the modules that will be loaded in the specified context(s) when more specific configurations are not found in the other relevant sections: [SideRecommendations], [TopRecommendations] and [NoResultsRecommendations]. In these latter three sections, the configuration keys are the names of search handlers, and the values are the recommendation modules that should be displayed when those search handlers are used. A special [AuthorModuleRecommendations] section also exists in searches.ini for configuration of the recommendations presented on the special author screen reached by clicking on author names in Solr search results.</p>
<p>This configuration setup offers a balance between ease of use and specificity. You can define default values that will be used in most situations, but you can override them with more specific recommendations as needed.</p>
<p>At each level of the configuration, recommendation modules are configured by providing the name of the module, optionally followed by a set of parameters separated by colons. The meanings of these parameters are detailed in the comments in searches.ini (and some examples will be explained below).</p>
<p>Here are the most relevant configurations from searches.ini as of VuFind 7.0:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[General]</span>
<span class="go">default_top_recommend[] = TopFacets:ResultsTop</span>
<span class="go">default_top_recommend[] = SpellingSuggestions</span>
<span class="go">default_side_recommend[] = SideFacets:Results:CheckboxFacets</span>
<span class="go">default_noresults_recommend[] = SwitchType</span>
<span class="go">default_noresults_recommend[] = SwitchQuery:::fuzzy</span>
<span class="go">default_noresults_recommend[] = SpellingSuggestions</span>
<span class="go">default_noresults_recommend[] = RemoveFilters</span>

<span class="go">[SideRecommendations]</span>

<span class="go">[TopRecommendations]</span>
<span class="go">Author[]            = AuthorFacets</span>
<span class="go">Author[]            = SpellingSuggestions</span>
<span class="go">CallNumber[]        = &quot;TopFacets:ResultsTop&quot;    ; disable spelling in this context</span>

<span class="go">[NoResultsRecommendations]</span>
<span class="go">CallNumber[] = SwitchQuery::wildcard:truncatechar</span>
<span class="go">CallNumber[] = RemoveFilters</span>
</pre></div>
</div>
<p>This configuration reveals that most searches will use defaults, but there are some special cases for author searches and call number searches.</p>
<p>On a normal search that returns results, facet options will be displayed in two places: some above the search results (based on the “TopFacets:ResultsTop” setting, which loads facets based on the ResultsTop section of facets.ini) and some in a sidebar (based on the “SideFacets:Results:CheckboxFacets” setting, which loads facets based on the Results and CheckboxFacet sections of facets.ini). Additionally, spelling suggestions will be displayed above the results, based on the “SpellingSuggestions” setting.</p>
<p>On a search that returns no results, there is no need to display facets, since there are no values available. However, spelling suggestions will still be displayed, along with three recommendation modules that suggest different ways the user could adjust their search to potentially bring in more results: SwitchType (which may suggest using a different search handler), SwitchQuery (which may suggest broadening a search query with a wildcard or by removing quotes), and RemoveFilters (which may suggest turning off applied filters).</p>
<p>The Author search uses a special recommendation module for browsing author names in place of the usual TopFacets display. Note that the SpellingSuggestions setting is repeated here because spell checking is still desired in this context, and if you override any recommendation modules for a search handler, none of the existing defaults will be applied. By contrast, the CallNumber-specific configuration maintains the default TopFacets display but turns off spell checking, since offering spelling suggestions for call numbers can lead to confusing results. CallNumber settings for empty search results are also customized to provide more context-appropriate suggestions.</p>
<p>Note that for all of the repeating settings (like default_top_recommend[]), it is important to include the brackets at the end of the key to ensure that all settings are respected, and the order of the settings in the .ini file will control the order in which the recommendation modules are displayed on screen.</p>
</div>
<div class="section" id="example-cross-linking-search-types-through-the-sidebar">
<h2>14.3 Example: Cross-Linking Search Types through the Sidebar<a class="headerlink" href="#example-cross-linking-search-types-through-the-sidebar" title="Permalink to this headline">¶</a></h2>
<p>Chapter 13 discussed an example of combining standard search results with website search results in a variety of ways. With recommendation modules, it is possible to add another layer of combined searching: you can display results from one backend as a sidebar in another result set. For example, you could show the top five web results in a sidebar next to main catalog results, and vice versa.</p>
<p>VuFind provides two recommendation modules that can be used to meet this need: CatalogResults, which displays results from the main Solr biblio core, and WebResults, which displays results from the Solr website core. Both of these modules accept two parameters: the name of the URL parameter containing search terms (which defaults to “lookfor,” which does not need to be changed for this example) and the number of search results to display in the sidebar (which defaults to 5). We just need to turn on WebResults in searches.ini and CatalogResults in website.ini.</p>
<p>This can be set up by following these steps:</p>
<ol class="arabic simple">
<li><p>Copy searches.ini  and website.ini from $VUFIND_HOME/config/vufind/ to $VUFIND_LOCAL_DIR/config/vufind/ if you have not previously customized these files.</p></li>
<li><p>Edit $VUFIND_LOCAL_DIR/config/vufind/searches.ini, and add <em>default_side_recommend[] = WebResults</em> to the [General] section of the file. In a default VuFind configuration, there should be no customizations in the [SideRecommendations] section, but if you have made customizations there, you will want to add WebResults to each of the customized search handlers as well.</p></li>
<li><p>Edit $VUFIND_LOCAL_DIR/config/vufind/website.ini and add <em>default_side_recommend[] = CatalogResults</em> to the [General] section if it is not already there (in recent VuFind releases, this is already turned on by default).</p></li>
</ol>
<p>Now VuFind should display brief previews of web results in standard result listings and vice versa.</p>
<p>If you wanted to display a different number of results in the recommendation boxes (for the sake of example, 3), you could edit the configuration lines to read <em>default_side_recommend[] = WebResults::3</em> and <em>default_side_recommend[] = CatalogResults::3</em>. The double colon is present because we are leaving the first parameter blank.</p>
<p>If you want to customize the look and feel of the recommendation boxes, each recommendation module has its own template which you can easily override in a local theme, as discussed in chapter 7 (particularly section 7.4). The naming convention for these template files is $VUFIND_HOME/themes/[theme name]/templates/Recommend/[module name].phtml – so, for example, if you wanted to override the WebResults display as defined in the bootstrap3 theme, and your local custom theme was named localtheme, you could copy $VUFIND_HOME/themes/bootstrap3/templates/Recommend/WebResults.phtml to $VUFIND_HOME/themes/localtheme/templates/Recommend/WebResults.phtml, and then make edits to the latter file.</p>
</div>
<div class="section" id="example-displaying-extra-links-for-empty-search-results">
<h2>14.4 Example: Displaying Extra Links for Empty Search Results<a class="headerlink" href="#example-displaying-extra-links-for-empty-search-results" title="Permalink to this headline">¶</a></h2>
<p>It is often useful to provide links to specific resources related to a search. For example, you might have a “search tips” page on your website which could provide guidance for users having difficulty with searches. VuFind includes a recommendation module named RecommendLinks which can render such a list. The RecommendLinks helper takes two parameters: the name of an ini file, and the name of a section within that file; it uses these to locate the list of recommendations to display. If no extra details are specified, it will look in the [RecommendLinks] section of searches.ini. Allowing configuration of the location of links means that the same RecommendLinks module can be used in different contexts to display different lists of links.</p>
<p>To implement the example of a link to a “search tips” guide when a user performs a search with no results, we could simply add <em>default_noresults_recommend[] = RecommendLinks</em> to the [General] section of $VUFIND_LOCAL_DIR/config/vufind/searches.ini, and then, in the same file, add this to the [RecommendLinks] section:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Search Tips = http://library.myuniversity.edu/search-tips</span>
</pre></div>
</div>
<p>(where “Search Tips” is the link text that will be displayed to the user, and <a class="reference external" href="http://library.myuniversity.edu/search-tips">http://library.myuniversity.edu/search-tips</a> is the desired link URL).</p>
<p>As in the previous example, the presentation of the links can be customized by overriding the Recommend/RecommendLinks.phtml template in a custom theme.</p>
</div>
<div class="section" id="additional-resources">
<h2>Additional Resources<a class="headerlink" href="#additional-resources" title="Permalink to this headline">¶</a></h2>
<p>VuFind’s recommendation module wiki page can be found at <a class="reference external" href="https://vufind.org/wiki/development:plugins:recommendation_modules">https://vufind.org/wiki/development:plugins:recommendation_modules</a>.</p>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Recommendation modules are used by VuFind to display supplemental information that complements search results. They are highly configurable, so you can use them to communicate important information specific to certain search backends and/or search handlers.</p>
</div>
<div class="section" id="review-questions">
<h2>Review Questions<a class="headerlink" href="#review-questions" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Where can you find a complete list of recommendation modules, including parameters?</p></li>
<li><p>Why are the brackets ([]) important at the end of settings like “default_top_recommend[]”?</p></li>
<li><p>If you wanted to add a new recommendation module only shown for Subject searches, while also displaying the existing default modules, how would you configure that?</p></li>
</ol>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Chapter 14. Recommendation Modules</a><ul>
<li><a class="reference internal" href="#learning-objectives">Learning Objectives</a></li>
<li><a class="reference internal" href="#what-is-a-recommendation-module">14.1 What is a Recommendation Module?</a></li>
<li><a class="reference internal" href="#understanding-recommendation-configuration">14.2 Understanding Recommendation Configuration</a></li>
<li><a class="reference internal" href="#example-cross-linking-search-types-through-the-sidebar">14.3 Example: Cross-Linking Search Types through the Sidebar</a></li>
<li><a class="reference internal" href="#example-displaying-extra-links-for-empty-search-results">14.4 Example: Displaying Extra Links for Empty Search Results</a></li>
<li><a class="reference internal" href="#additional-resources">Additional Resources</a></li>
<li><a class="reference internal" href="#summary">Summary</a></li>
<li><a class="reference internal" href="#review-questions">Review Questions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="combineresults.html"
                        title="previous chapter">Chapter 13. Combining Different Types of Search Results</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="otherv.html"
                        title="next chapter">Chapter 15. Other Search Backends</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/recommend.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="otherv.html" title="Chapter 15. Other Search Backends"
             >next</a> |</li>
        <li class="right" >
          <a href="combineresults.html" title="Chapter 13. Combining Different Types of Search Results"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Vufind Documentation 0.0.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Chapter 14. Recommendation Modules</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Demian Katz .
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>